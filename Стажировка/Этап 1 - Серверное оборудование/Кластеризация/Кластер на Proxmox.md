![](../../images/Кластер%20на%20Proxmox-09.02.2026-19_02.png)
Особенности Proxmox VE:

1. Продукт предлагает 2 типа виртуализации: полный вариант с KVM и контейнеры с LXC.
2. Максимальное количество физических машин в одном кластере составляет 32 единицы.
3. Предпочтительно использовать один и тот же релиз Proxmox на всех активных хостах.
4. Режим High-Availability требует подключения в кластер хотя бы 3 нод.
5. Взаимодействие осуществляется через порты UDP/5404, UDP/5405, TCP/22.
6. Задержка в сети, объединяющей ноды, не должна превышать 2 миллисекунд.

В кластере можно объединить разное оборудование:
- серверные машины
- домашние пк
- старые рабочие станции
Но нюансы:
1. **Миграция ВМ**: если процессоры сильно отличаются (Intel ↔ AMD), потребуется настройка CPU-compatibility или миграция не будет возможна.
2. **Производительность**: слабые ноды не смогут выдержать ту же нагрузку, что и серверные. То есть, если с “мощной” ноды разом мигрируют много вм-ок, то маломощная нода просто станет неработоспособной из-за нагрузки.
3. **Сеть и диски**: лучше обеспечить единый быстрый канал (1/10/25 Гбит) и одинаковые хранилища для оптимальной работы.

## Возможные конфигурации

![](../../images/Кластер%20на%20Proxmox-09.02.2026-19_02-3.png)
## HA Cluster

![](../../images/Кластер%20на%20Proxmox-09.02.2026-19_02-1.png)

Proxmox HA Cluster — это группа физических серверов (нод), объединённых в кластер, который автоматически перезапускает виртуальные машины (ВМ) или контейнеры на работоспособных узлах в случае отказа одного из серверов. Это позволяет достичь высокой доступности критически важных сервисов с минимальным временем простоя

Всегда минимум 3 ноды, 3 узла из-за обязательного наличия кворума. Такое кол-во нужно для предотвращения проблемы с выбором кворума, чтобы оставалось большинство голосов. 
**Quorum (кворум)** — это механизм голосования внутри кластера Proxmox, который определяет, может ли кластер работать.
- Каждый узел кластера имеет **один голос**.
- Для работы кластера необходимо больше **половины голосов**.
- Если кворума нет, операции с виртуальными машинами и контейнерами блокируются, чтобы избежать **split-brain** (ситуации, когда узлы начинают работать независимо и конфликтуют).
Кворум организован с помощью Corosync Cluster Engine

Но можно сделать кластер с 2 нодами с помощью QDevice(внешний сервис-арбитр в кластерах, обеспечивающий дополнительный голос для достижения кворума. Он делает число узлов нечетным, позволяя кластеру работать и принимать решения даже при выходе из строя половины нод. В качестве него можно использовать плату Rapsberry PI)
![](../../images/Кластер%20на%20Proxmox-09.02.2026-19_02-2.png)


| Требование                 | Описание                                                                                                                                                | Минимальная рекомендация                                                                                          |
| -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| **Количество узлов**       | Для формирования **кворума** (механизма принятия решений) и избежания ситуации "split-brain" (когда части кластера теряют связь и работают независимо). | **3 узла**. Кластер из 2 узлов требует дополнительной настройки **QDevice** (третьего устройства для голосования) |
| **Общее хранилище**        | Диски виртуальных машин должны быть доступны с любого узла кластера для их запуска после сбоя.                                                          | Ceph, NFS, iSCSI. Локальные диски **не подходят** для полноценного HA                                             |
| **Сетевая инфраструктура** | Стабильная связь между узлами для обмена служебной информацией (Corosync).                                                                              | Отдельная выделенная сеть для трафика кластера и хранилища, желательно 10 Гбит/с[                                 |
| **Аппаратная надёжность**  | Компоненты без единой точки отказа.                                                                                                                     | RAID-массивы, ECC-память, резервные блоки питания                                                                 |
## Shared Storage
В данной структуре можно использовать q-device. Но все данные хранятся на отдельном хранилище
![](../../images/Кластер%20на%20Proxmox-09.02.2026-20_02.png)

Также можно использовать кластер, где каждая нода имеет свои диски, но после этого организуется Ceph-кластер
![](../../images/Кластер%20на%20Proxmox-09.02.2026-20_02-1.png)